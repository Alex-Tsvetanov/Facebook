<!DOCTYPE html>
<html>
	<head>
		<title>Какво ще работиш?</title>
		<meta charset="UTF-8">
	</head>
	<body>
		<script>
			window.fbAsyncInit = function() {
				FB.init({
					appId      : '1818518568468396',
					xfbml      : true,
					version    : 'v2.9'
				});
				FB.AppEvents.logPageView();
			};

			(function(d, s, id){
				var js, fjs = d.getElementsByTagName(s)[0];
				if (d.getElementById(id)) {return;}
				js = d.createElement(s); js.id = id;
				js.src = "//connect.facebook.net/en_US/sdk.js";
				fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
		</script>
		<div class="fb-login-button" data-max-rows="1" data-size="large" data-button-type="continue_with" data-show-faces="true" data-auto-logout-link="false" data-use-continue-as="true"></div>
		<div id="status"> </div>
		<script>
			function statusChangeCallback(response) {
				console.log('statusChangeCallback');
				console.log(response);
				if (response.status === 'connected') {
					console.log('Welcome!  Fetching your information.... ');
					FB.api('/me', { locale: 'en_US', fields: 'name, email' }, function(response) {
						console.log('Successful login for: ' + response.name);
						console.log('Successful login for: ' + response.email);
						document.getElementById('status').innerHTML =
							'Thanks for logging in, ' + response.name + '!<br>' + 
							'Thanks for logging in, ' + response.email + '!';
					});
				} else {
					document.getElementById('status').innerHTML = 'Please log ' +
						'into this app.';
				}
			}

			function checkLoginState() {
				console.log ("in");
				FB.getLoginStatus(function(response) {
					statusChangeCallback(response);
				});
			}
			
			window.document.onload = function() { checkLoginState(); };
			window.onload = function() { checkLoginState(); };
		</script>
	</body>
</html>
